<!--pages/order/order.wxml-->
<view class="container">
  <!-- å¤´éƒ¨æ ‡é¢˜ -->
  <view class="header">
    <view class="shop-name">ğŸµ èŒ¶è¯­å ‚</view>
    <view class="shop-subtitle">äº¬è¥¿æ™ºè°·ç²¾å“èŒ¶é¥®</view>
  </view>

  <!-- åˆ†ç±»å¯¼èˆª -->
  <view class="category-nav">
    <scroll-view scroll-x="true" class="category-scroll">
      <view class="category-list">
        <view 
          class="category-item {{item.active ? 'active' : ''}}"
          wx:for="{{categories}}"
          wx:key="id"
          data-id="{{item.id}}"
          bindtap="switchCategory">
          {{item.name}}
        </view>
      </view>
    </scroll-view>
  </view>

  <!-- å•†å“åˆ—è¡¨ -->
  <view class="products-section">
    <view class="product-grid">
      <view 
        class="product-card"
        wx:for="{{products}}"
        wx:key="id"
        wx:if="{{item.categoryId === currentCategory || currentCategory === 0}}">
        
        <!-- çƒ­é”€æ ‡ç­¾ -->
        <view class="hot-tag" wx:if="{{item.hot}}">ğŸ”¥</view>
        
        <!-- å•†å“å›¾ç‰‡ -->
        <view class="product-image-wrapper">
          <image src="{{item.image}}" class="product-image" mode="aspectFill"></image>
        </view>
        
        <!-- å•†å“ä¿¡æ¯ -->
        <view class="product-info">
          <view class="product-name">{{item.name}}</view>
          <view class="product-description">{{item.description}}</view>
          <view class="product-footer">
            <view class="product-price">Â¥{{item.price}}</view>
            <button 
              class="add-btn"
              data-id="{{item.id}}"
              bindtap="addToCart">
              åŠ å…¥è´­ç‰©è½¦
            </button>
          </view>
        </view>
      </view>
    </view>
  </view>

  <!-- è´­ç‰©è½¦åº•éƒ¨æ  -->
  <view class="cart-bar" wx:if="{{cart.length > 0}}">
    <view class="cart-info" bindtap="showCartDetail">
      <view class="cart-icon-wrapper">
        <view class="cart-icon">ğŸ›’</view>
        <view class="cart-count" wx:if="{{cart.length > 0}}">{{cart.length}}</view>
      </view>
      <view class="cart-text">
        <view class="cart-total">Â¥{{totalPrice}}</view>
        <view class="cart-tips">ç‚¹å‡»æŸ¥çœ‹è´­ç‰©è½¦</view>
      </view>
    </view>
    <button class="checkout-btn" bindtap="submitOrder">
      æäº¤è®¢å•
    </button>
  </view>

  <!-- è´­ç‰©è½¦è¯¦æƒ…å¼¹çª— -->
  <view class="cart-modal" wx:if="{{showCart}}">
    <view class="cart-mask" bindtap="hideCart"></view>
    <view class="cart-content">
      <view class="cart-header">
        <view class="cart-title">è´­ç‰©è½¦</view>
        <view class="cart-clear" bindtap="clearCart">æ¸…ç©º</view>
      </view>
      
      <scroll-view scroll-y="true" class="cart-list">
        <view 
          class="cart-item"
          wx:for="{{cart}}"
          wx:key="id">
          <image src="{{item.image}}" class="cart-item-image" mode="aspectFill"></image>
          <view class="cart-item-info">
            <view class="cart-item-name">{{item.name}}</view>
            <view class="cart-item-price">Â¥{{item.price}}</view>
          </view>
          <view class="quantity-controls">
            <view 
              class="quantity-btn minus"
              data-id="{{item.id}}"
              bindtap="decreaseQuantity">-</view>
            <view class="quantity-text">{{item.quantity}}</view>
            <view 
              class="quantity-btn plus"
              data-id="{{item.id}}"
              bindtap="increaseQuantity">+</view>
          </view>
        </view>
      </scroll-view>
      
      <view class="cart-footer">
        <view class="cart-total-info">
          æ€»è®¡ï¼šÂ¥{{totalPrice}}
        </view>
        <button class="cart-submit-btn" bindtap="submitOrder">
          æäº¤è®¢å•
        </button>
      </view>
    </view>
  </view>
</view>